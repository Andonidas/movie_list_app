{"ast":null,"code":"var _jsxFileName = \"/Users/qiluan/Desktop/scripts/training/last_project/movie_list_app/movie_list/src/pages/top_rated_page.jsx\";\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport { connect } from 'react-redux';\nimport MovieList from '../components/movieListComponent/layout';\nimport { fetchSaveTopRatedPage } from '../actionCreators/topRatedPageActionCreator';\nimport Pagination from '../components/pagination/pagination';\nimport { PAGE_ROUTE } from '../constants/page_route';\nimport './top_rated_page.css'; // A wrapper that fetch page data then feed to innercomponent\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fetchDataWrapper = InnerComponent => {\n  return function (props) {\n    let {\n      fetchData,\n      pageNumber,\n      ...others\n    } = props;\n    useEffect(() => {\n      fetchData(pageNumber);\n    }, [pageNumber, fetchData]);\n    return /*#__PURE__*/_jsxDEV(InnerComponent, { ...others\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this);\n  };\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  let pageNumber = parseInt(ownProps.pageNumber);\n  if (isNaN(pageNumber)) pageNumber = 1;\n  let movieListData;\n  let status;\n\n  if (state.topRatedPage.cachedPages[pageNumber]) {\n    movieListData = state.topRatedPage.cachedPages[pageNumber].data ? state.topRatedPage.cachedPages[pageNumber].data.results : [];\n    status = state.topRatedPage.cachedPages[pageNumber].status;\n  } else {\n    movieListData = [];\n    status = 'NA';\n  }\n\n  return {\n    movieListData,\n    status\n  };\n};\n\nconst mapDispatchToProps = {\n  fetchData: fetchSaveTopRatedPage\n};\nconst ConnectList = connect(mapStateToProps, mapDispatchToProps)(fetchDataWrapper(MovieList));\nexport default function TopRatedPage(props) {\n  let params = useParams();\n  let pageNumber;\n\n  if (props.pageNumber !== undefined && !isNaN(parseInt(props.pageNumber)) && parseInt(props.pageNumber) > 0) {\n    pageNumber = parseInt(props.pageNumber);\n  } else if (params.pageNumber !== undefined && !isNaN(parseInt(params.pageNumber)) && parseInt(params.pageNumber) > 0) {\n    pageNumber = parseInt(params.pageNumber);\n  } else {\n    pageNumber = 1;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movielist\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Top Rated Movies\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      pageRouteType: PAGE_ROUTE.topRatedPage,\n      pageNumber: pageNumber,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConnectList, {\n      pageNumber: pageNumber,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["React","useEffect","useParams","connect","MovieList","fetchSaveTopRatedPage","Pagination","PAGE_ROUTE","fetchDataWrapper","InnerComponent","props","fetchData","pageNumber","others","mapStateToProps","state","ownProps","parseInt","isNaN","movieListData","status","topRatedPage","cachedPages","data","results","mapDispatchToProps","ConnectList","TopRatedPage","params","undefined"],"sources":["/Users/qiluan/Desktop/scripts/training/last_project/movie_list_app/movie_list/src/pages/top_rated_page.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport { connect } from 'react-redux';\nimport MovieList from '../components/movieListComponent/layout';\nimport { fetchSaveTopRatedPage } from '../actionCreators/topRatedPageActionCreator';\nimport Pagination from '../components/pagination/pagination';\nimport { PAGE_ROUTE } from '../constants/page_route';\nimport './top_rated_page.css';\n// A wrapper that fetch page data then feed to innercomponent\nconst fetchDataWrapper = (InnerComponent) => {\n  return function (props) {\n    let { fetchData, pageNumber, ...others} = props;\n    useEffect(() => {\n      fetchData(pageNumber);\n    }, [pageNumber, fetchData])\n    return (\n      <InnerComponent {...others}/>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  let pageNumber = parseInt(ownProps.pageNumber);\n  if (isNaN(pageNumber)) pageNumber = 1;\n  let movieListData;\n  let status;\n  if (state.topRatedPage.cachedPages[pageNumber]) {\n    movieListData = state.topRatedPage.cachedPages[pageNumber].data\n      ? state.topRatedPage.cachedPages[pageNumber].data.results\n      : [];\n    status = state.topRatedPage.cachedPages[pageNumber].status;\n  } else {\n    movieListData = [];\n    status = 'NA';\n  }\n  return {movieListData, status};\n}\n\nconst mapDispatchToProps = ({fetchData: fetchSaveTopRatedPage});\n\nconst ConnectList = connect(mapStateToProps, mapDispatchToProps)(fetchDataWrapper(MovieList));\n\nexport default function TopRatedPage(props) {\n  let params = useParams();\n  let pageNumber;\n  if (\n    props.pageNumber !== undefined &&\n    !isNaN(parseInt(props.pageNumber)) &&\n    parseInt(props.pageNumber) > 0\n  ) {\n    pageNumber = parseInt(props.pageNumber);\n  } else if (\n    params.pageNumber !== undefined &&\n    !isNaN(parseInt(params.pageNumber)) &&\n    parseInt(params.pageNumber) > 0\n  ) {\n    pageNumber = parseInt(params.pageNumber);\n  } else {\n    pageNumber = 1;\n  }\n\n  return (\n    <div className=\"movielist\">\n      <h2>Top Rated Movies</h2>\n      <Pagination pageRouteType={PAGE_ROUTE.topRatedPage} pageNumber={pageNumber} {...props}/>\n      <ConnectList pageNumber={pageNumber} {...props}/>\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}